function init3D(n){function it(n){n.preventDefault();c.x=n.clientX;c.y=n.clientY;v.x=n.clientX/width*2-1;v.y=-(n.clientY/height)*2+1}function rt(n){n.preventDefault();t!=null&&graph.showNode(t.node_id)}function d(){requestAnimationFrame(d);ut();k.update()}function ut(){if(!l){b.setFromCamera(v,o);var n=b.intersectObjects(u.children);n.length>0?t!=n[0].object&&(t?t.material.color.setHex(t.originColor):$tooltip.show(),t=n[0].object,t.originColor=t.material.color.getHex(),t.material.color.setHex(16777215),$tooltip.css("top",c.y-5),$tooltip.css("left",c.x+20),$tooltipText.css("color","#"+(16777216+t.originColor).toString(16).slice(1)),$tooltipText.html(t.node_name)):(t&&t.material.color.setHex(t.originColor),t=null,$tooltip.hide());i.render(e,o)}}var e=new THREE.Scene,o=new THREE.PerspectiveCamera(75,width/height,1,1e3),i,y,p,a,h,w;o.position.z=500;i=new THREE.WebGLRenderer({antialias:!1});i.setPixelRatio(window.devicePixelRatio);i.setSize(width,height);i.sortObjects=!1;container.appendChild(i.domElement);y=new THREE.OrbitControls(o,i.domElement);y.enableZoom=!0;var g=coolRender?new THREE.SphereBufferGeometry(1,16,10):new THREE.SphereBufferGeometry(1,12,8),u=new THREE.Object3D,r=new Float32Array(n.edges.length*6),s=[],nt=new THREE.LineBasicMaterial({color:12303291,opacity:.2,transparent:!0}),f=new THREE.BufferGeometry,l=!1,tt={showNode:function(n,t){var i,r,e;l=!0;n==null&&t==null?($.each(u.children,function(n,t){t.visible=!0}),f.setIndex(new THREE.BufferAttribute(new Uint16Array(s),1)),$details.css("right","-300px")):n!=null?(r=nodes[n],$.each(u.children,function(t,i){i.visible=i.node_id==n||r.links.indexOf(i.node_id)>=0}),f.setIndex(new THREE.BufferAttribute(new Uint16Array(r.indices),1)),i="<div><h2>"+r.label+"<\/h2><hr/>",i+="<p><b>Modularity Class<\/b>: "+r.attributes["Modularity Class"]+"<\/p>",i+="<p><b>Eccentricity<\/b>: "+r.attributes.Eccentricity+"<\/p>",i+="<p><b>Closeness Centrality<\/b>: "+r.attributes["Closeness Centrality"]+"<\/p>",i+="<p><b>Betweenness Centrality<\/b>: "+r.attributes["Betweenness Centrality"]+"<\/p>",i+="<p><b>Harmonic Closeness Centrality<\/b>: "+r.attributes["Harmonic Closeness Centrality"]+"<\/p>",i+="<p class='links'><b>Connections<\/b>:<br/>",$.each(r.links,function(n,t){var r=nodes[t];i+="<a href='javascript:void(0);' data-id='"+r.id+"'>"+r.label+"<\/a><br/>"}),i+="<\/p><\/div>",$details.find(".panel-content").html(i),$details.css("right","0")):(e=groups[t],$.each(u.children,function(n,t){t.visible=e.nodes.indexOf(t.node_id)>=0}),f.setIndex(new THREE.BufferAttribute(new Uint16Array(e.indices),1)),i="<div><h2>Group "+e.id+"<\/h2><hr/>",i+="<p class='links'><b>"+e.nodes.length+" members<\/b>:<br/><br/>",$.each(e.nodes,function(n,t){var r=nodes[t];i+="<a href='javascript:void(0);' data-id='"+r.id+"'>"+r.label+"<\/a><br/>"}),i+="<\/p><\/div>",$details.find(".panel-content").html(i),$details.css("right","0"));l=!1}};coolRender&&(p=new THREE.AmbientLight(16777215,.5),e.add(p),a=new THREE.DirectionalLight(16777215,1),a.position.set(0,1,0),e.add(a));$.each(n.nodes,function(n,t){var f,r,i;t.lcLabel=t.label.toLowerCase();t.indices=[];t.links=[];t.z=Math.sqrt(Math.abs(7e4-(t.x*t.x+t.y*t.y)))*(t.id%2==0?1:-1);t.size>2&&t.size<19&&(f=1-t.size/20,t.x=t.x*f,t.y=t.y*f,t.z=t.z*f);nodes[t.id]=t;r=groups[t.attributes["Modularity Class"]];r==null?(r={id:t.attributes["Modularity Class"],color:t.color,nodes:[t.id],indices:[]},groups[r.id]=r):r.nodes.push(t.id);i=new THREE.Mesh(g,coolRender?new THREE.MeshLambertMaterial({color:t.color}):new THREE.MeshBasicMaterial({color:t.color}));i.matrixAutoUpdate=!1;i.position.x=t.x;i.position.y=t.y;i.position.z=t.z;i.scale.x=t.size;i.scale.y=t.size;i.scale.z=t.size;i.node_id=t.id;i.node_name=t.label;i.updateMatrix();u.add(i)});h="<ul>";$.each(groups,function(n,t){t!=null&&(h+="<li><a href='javascript:void(0);' data-id='"+t.id+"'><span style='background-color: "+t.color+"'><\/span> Group "+t.id+" ("+t.nodes.length+" members)<\/a><\/li>")});h+="<\/ul>";$("#divSearch .groups").html(h);e.add(u);$.each(n.edges,function(n,t){var i=nodes[t.source],u=nodes[t.target],f,e;i!=null&&u!=null&&(f=n*6,r[f]=i.x,r[f+1]=i.y,r[f+2]=i.z,r[f+3]=u.x,r[f+4]=u.y,r[f+5]=u.z,s.push(n*2),s.push(n*2+1),i.links.push(u.id),u.links.push(i.id),i.indices.push(n*2),i.indices.push(n*2+1),u.indices.push(n*2),u.indices.push(n*2+1),i.attributes["Modularity Class"]==u.attributes["Modularity Class"]&&(e=groups[i.attributes["Modularity Class"]],e.indices.push(n*2),e.indices.push(n*2+1)))});f.addAttribute("position",new THREE.BufferAttribute(r,3));f.setIndex(new THREE.BufferAttribute(new Uint16Array(s),1));w=new THREE.LineSegments(f,nt);e.add(w);var b=new THREE.Raycaster,v=new THREE.Vector2,c=new THREE.Vector2,t,k=new Stats;return container.appendChild(k.dom),container.addEventListener("mousemove",it,!1),container.addEventListener("click",rt,!1),d(),tt}function scanValue(n){var t=0,i=100,r=0;$.each(n.nodes,function(n,u){var f=u.x*u.x+u.y*u.y;t<f&&(t=f);i>u.size&&(i=u.size);r<u.size&&(r=u.size)});$container.html(t+"<br/>"+i+" - "+r)}function hideAbout(){$("#divAbout").fadeTo(500,0,function(){$(this).hide()})}function search(){var i=$("#divSearch .search-query").find("input[type='text']").val().trim().toLowerCase(),r=$("#divSearch .search-query").find(".results"),t=[],n="";i.length<3?n="<span>You must search for a name with a minimum of 3 letters.<\/span>":($.each(rawNodes,function(n,r){r.lcLabel.indexOf(i)>=0&&t.push(r)}),t.length==0?n="<span>No results found.<\/span>":(n+="<span>"+t.length+" results:<\/span><br/>",n+="<ul>",$.each(t,function(t,i){n+="<li><a href='javascript:void(0);' data-id='"+i.id+"'>"+i.label+"<\/a><\/li>"}),n+="<\/ul>"));r.html(n);t.length==0?graph.showNode():graph.showNode(t[0].id)}var container=document.getElementById("divContainer"),$container=$(container),$tooltip=$("#divTooltip"),$tooltipText=$tooltip.find("span"),$details=$("#divDetails"),width,height,rawNodes,nodes=[],groups=[],graph,coolRender=!0;$(document).ready(function(){$("#divSearch .about").click(function(){$("#divAbout").fadeTo(500,1)});$("#divAbout").click(function(){hideAbout()});$("#divAbout .dialog-content").click(function(){return!1});$("#divAbout .dialog-close").click(function(){return hideAbout(),!1});$("#divSearch .search-query").on("keypress","input[type='text']",function(n){if(n.keyCode==13)return search(),!1});$("#divSearch .search-query").on("click","span",function(){search()});$("#divSearch .results").on("click","a",function(){graph.showNode($(this).attr("data-id"))});$("#divSearch .groups").on("click","a",function(){graph.showNode(null,$(this).attr("data-id"))});$("#divDetails").on("click",".links a",function(){graph.showNode($(this).attr("data-id"))});$("#divDetails .panel-close").click(function(){graph.showNode()});$("#divDetails .panel-close-link").click(function(){graph.showNode()});$.getJSON("data.json",function(n){width=$container.width();height=$container.height();rawNodes=n.nodes;graph=init3D(n)})});
/*
//# sourceMappingURL=index2.min.js.map
*/